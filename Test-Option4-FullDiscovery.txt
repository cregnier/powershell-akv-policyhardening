[2026-01-29 10:48:42] [INFO] Auto-run mode enabled - starting full discovery...
[2026-01-29 10:48:42] [HEADER] Starting Full (Detailed) Discovery...
[2026-01-29 10:48:42] [INFO] Phase 1/3: Subscription Inventory
[2026-01-29 10:48:42] [HEADER] Starting Subscription Inventory...
Unable to acquire token for tenant '28a0fe2d-1db4-4c3e-9a58-142d0f38e709' with error 'Authentication failed against tenant 28a0fe2d-1db4-4c3e-9a58-142d0f38e709. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 28a0fe2d-1db4-4c3e-9a58-142d0f38e709'.'
Unable to acquire token for tenant '93298d06-3fff-4626-8e13-397bf9bd4c30' with error 'Authentication failed against tenant 93298d06-3fff-4626-8e13-397bf9bd4c30. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 93298d06-3fff-4626-8e13-397bf9bd4c30'.'
Unable to acquire token for tenant '218094f2-2976-4255-a15c-4008e6c8a18b' with error 'Authentication failed against tenant 218094f2-2976-4255-a15c-4008e6c8a18b. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 218094f2-2976-4255-a15c-4008e6c8a18b'.'
[2026-01-29 10:48:43] [SUCCESS] Found 3 subscription(s)
[2026-01-29 10:48:43] [INFO] Processing 1 / 3: MSDN Platforms Subscription
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 28a0fe2d-1db4-4c3e-9a58-142d0f38e709. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 28a0fe2d-1db4-4c3e-9a58-142d0f38e709'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 93298d06-3fff-4626-8e13-397bf9bd4c30. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 93298d06-3fff-4626-8e13-397bf9bd4c30'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 218094f2-2976-4255-a15c-4008e6c8a18b. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 218094f2-2976-4255-a15c-4008e6c8a18b'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 28a0fe2d-1db4-4c3e-9a58-142d0f38e709. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 28a0fe2d-1db4-4c3e-9a58-142d0f38e709'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 93298d06-3fff-4626-8e13-397bf9bd4c30. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 93298d06-3fff-4626-8e13-397bf9bd4c30'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 218094f2-2976-4255-a15c-4008e6c8a18b. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 218094f2-2976-4255-a15c-4008e6c8a18b'.'
[2026-01-29 10:48:44] [INFO] Processing 2 / 3: Azure subscription 1
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 28a0fe2d-1db4-4c3e-9a58-142d0f38e709. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 28a0fe2d-1db4-4c3e-9a58-142d0f38e709'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 93298d06-3fff-4626-8e13-397bf9bd4c30. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 93298d06-3fff-4626-8e13-397bf9bd4c30'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 218094f2-2976-4255-a15c-4008e6c8a18b. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 218094f2-2976-4255-a15c-4008e6c8a18b'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 28a0fe2d-1db4-4c3e-9a58-142d0f38e709. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 28a0fe2d-1db4-4c3e-9a58-142d0f38e709'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 93298d06-3fff-4626-8e13-397bf9bd4c30. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 93298d06-3fff-4626-8e13-397bf9bd4c30'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 218094f2-2976-4255-a15c-4008e6c8a18b. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 218094f2-2976-4255-a15c-4008e6c8a18b'.'
[2026-01-29 10:48:46] [ERROR]   Error: Subscription 9f51cccf-950f-45d3-b2bf-df25d614c4d2 was not found in tenant . Please verify that the subscription exists in this tenant.
[2026-01-29 10:48:46] [INFO] Processing 3 / 3: Pay-As-You-Go
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 28a0fe2d-1db4-4c3e-9a58-142d0f38e709. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 28a0fe2d-1db4-4c3e-9a58-142d0f38e709'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 93298d06-3fff-4626-8e13-397bf9bd4c30. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 93298d06-3fff-4626-8e13-397bf9bd4c30'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 218094f2-2976-4255-a15c-4008e6c8a18b. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 218094f2-2976-4255-a15c-4008e6c8a18b'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 28a0fe2d-1db4-4c3e-9a58-142d0f38e709. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 28a0fe2d-1db4-4c3e-9a58-142d0f38e709'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 93298d06-3fff-4626-8e13-397bf9bd4c30. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 93298d06-3fff-4626-8e13-397bf9bd4c30'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 218094f2-2976-4255-a15c-4008e6c8a18b. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 218094f2-2976-4255-a15c-4008e6c8a18b'.'
[2026-01-29 10:48:48] [ERROR]   Error: Subscription 332b96cc-1d4e-439c-b88f-c3ab0fec466c was not found in tenant . Please verify that the subscription exists in this tenant.
[2026-01-29 10:48:48] [SUCCESS] Exported full inventory to: .\Discovery-20260129-104842\SubscriptionInventory.csv
[2026-01-29 10:48:48] [SUCCESS] Exported template format to: .\Discovery-20260129-104842\subscriptions-template.csv
[2026-01-29 10:48:48] [SUCCESS] Subscription inventory complete!
[2026-01-29 10:48:48] [INFO] Summary: 1 enabled / 1 total subscriptions

Press any key to return to menu...
[2026-01-29 10:48:57] [INFO] Phase 2/3: Key Vault Inventory
[2026-01-29 10:48:57] [HEADER] Starting Key Vault Inventory...
[2026-01-29 10:48:57] [INFO] === Azure Key Vault Inventory Script ===
[2026-01-29 10:48:57] [INFO] Sprint 1, Story 1.1 - Environment Discovery & Baseline Assessment
[2026-01-29 10:48:57] [INFO] 
[2026-01-29 10:48:57] [SUCCESS] Connected to Azure as: theregniers@hotmail.com
[2026-01-29 10:48:57] [INFO] Tenant: 21bd262e-3255-411e-8345-51102d9d9e9e
[2026-01-29 10:48:57] [INFO] Retrieving all subscriptions in tenant...
Unable to acquire token for tenant '28a0fe2d-1db4-4c3e-9a58-142d0f38e709' with error 'Authentication failed against tenant 28a0fe2d-1db4-4c3e-9a58-142d0f38e709. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 28a0fe2d-1db4-4c3e-9a58-142d0f38e709'.'
Unable to acquire token for tenant '93298d06-3fff-4626-8e13-397bf9bd4c30' with error 'Authentication failed against tenant 93298d06-3fff-4626-8e13-397bf9bd4c30. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 93298d06-3fff-4626-8e13-397bf9bd4c30'.'
Unable to acquire token for tenant '218094f2-2976-4255-a15c-4008e6c8a18b' with error 'Authentication failed against tenant 218094f2-2976-4255-a15c-4008e6c8a18b. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 218094f2-2976-4255-a15c-4008e6c8a18b'.'
[2026-01-29 10:48:58] [SUCCESS] Found 3 subscription(s)
[2026-01-29 10:48:58] [INFO] Processing subscription 1 of 3: MSDN Platforms Subscription
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 28a0fe2d-1db4-4c3e-9a58-142d0f38e709. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 28a0fe2d-1db4-4c3e-9a58-142d0f38e709'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 93298d06-3fff-4626-8e13-397bf9bd4c30. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 93298d06-3fff-4626-8e13-397bf9bd4c30'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 218094f2-2976-4255-a15c-4008e6c8a18b. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 218094f2-2976-4255-a15c-4008e6c8a18b'.'
[2026-01-29 10:49:00] [SUCCESS]   Found 9 Key Vault(s)
[2026-01-29 10:49:00] [INFO]     Processing: TestAKV-SM
Upcoming breaking changes in the cmdlet 'Get-AzDiagnosticSetting' :
- The output type 'Microsoft.Azure.PowerShell.Cmdlets.Monitor.DiagnosticSetting.Models.Api20210501Preview.IDiagnosticSettingsResource' is changing
- The following properties in the output type are being deprecated : 'Log' 'Metric'
- The following properties are being added to the output type : 'Log' 'Metric'
- Change description : The types of the properties Log and Metric will be changed from single object or fixed array to 'List'. 
- This change will take effect on '11/3/2025'- The change is expected to take effect from Az version : '15.0.0'
- The change is expected to take effect from version : '7.0.0'
Note : Go to https://aka.ms/azps-changewarnings for steps to suppress this breaking change warning, and other information on breaking changes in Azure PowerShell.
[2026-01-29 10:49:01] [INFO]     Processing: kv-ok-1820486r
Upcoming breaking changes in the cmdlet 'Get-AzDiagnosticSetting' :
- The output type 'Microsoft.Azure.PowerShell.Cmdlets.Monitor.DiagnosticSetting.Models.Api20210501Preview.IDiagnosticSettingsResource' is changing
- The following properties in the output type are being deprecated : 'Log' 'Metric'
- The following properties are being added to the output type : 'Log' 'Metric'
- Change description : The types of the properties Log and Metric will be changed from single object or fixed array to 'List'. 
- This change will take effect on '11/3/2025'- The change is expected to take effect from Az version : '15.0.0'
- The change is expected to take effect from version : '7.0.0'
Note : Go to https://aka.ms/azps-changewarnings for steps to suppress this breaking change warning, and other information on breaking changes in Azure PowerShell.
[2026-01-29 10:49:01] [INFO]     Processing: kv-no-purge-1820486r
Upcoming breaking changes in the cmdlet 'Get-AzDiagnosticSetting' :
- The output type 'Microsoft.Azure.PowerShell.Cmdlets.Monitor.DiagnosticSetting.Models.Api20210501Preview.IDiagnosticSettingsResource' is changing
- The following properties in the output type are being deprecated : 'Log' 'Metric'
- The following properties are being added to the output type : 'Log' 'Metric'
- Change description : The types of the properties Log and Metric will be changed from single object or fixed array to 'List'. 
- This change will take effect on '11/3/2025'- The change is expected to take effect from Az version : '15.0.0'
- The change is expected to take effect from version : '7.0.0'
Note : Go to https://aka.ms/azps-changewarnings for steps to suppress this breaking change warning, and other information on breaking changes in Azure PowerShell.
[2026-01-29 10:49:02] [INFO]     Processing: kv-no-diag-1820486r
Upcoming breaking changes in the cmdlet 'Get-AzDiagnosticSetting' :
- The output type 'Microsoft.Azure.PowerShell.Cmdlets.Monitor.DiagnosticSetting.Models.Api20210501Preview.IDiagnosticSettingsResource' is changing
- The following properties in the output type are being deprecated : 'Log' 'Metric'
- The following properties are being added to the output type : 'Log' 'Metric'
- Change description : The types of the properties Log and Metric will be changed from single object or fixed array to 'List'. 
- This change will take effect on '11/3/2025'- The change is expected to take effect from Az version : '15.0.0'
- The change is expected to take effect from version : '7.0.0'
Note : Go to https://aka.ms/azps-changewarnings for steps to suppress this breaking change warning, and other information on breaking changes in Azure PowerShell.
[2026-01-29 10:49:03] [INFO]     Processing: kv-accesspolicy-1820486r
Upcoming breaking changes in the cmdlet 'Get-AzDiagnosticSetting' :
- The output type 'Microsoft.Azure.PowerShell.Cmdlets.Monitor.DiagnosticSetting.Models.Api20210501Preview.IDiagnosticSettingsResource' is changing
- The following properties in the output type are being deprecated : 'Log' 'Metric'
- The following properties are being added to the output type : 'Log' 'Metric'
- Change description : The types of the properties Log and Metric will be changed from single object or fixed array to 'List'. 
- This change will take effect on '11/3/2025'- The change is expected to take effect from Az version : '15.0.0'
- The change is expected to take effect from version : '7.0.0'
Note : Go to https://aka.ms/azps-changewarnings for steps to suppress this breaking change warning, and other information on breaking changes in Azure PowerShell.
[2026-01-29 10:49:03] [INFO]     Processing: kv-rbac-1820486r
Upcoming breaking changes in the cmdlet 'Get-AzDiagnosticSetting' :
- The output type 'Microsoft.Azure.PowerShell.Cmdlets.Monitor.DiagnosticSetting.Models.Api20210501Preview.IDiagnosticSettingsResource' is changing
- The following properties in the output type are being deprecated : 'Log' 'Metric'
- The following properties are being added to the output type : 'Log' 'Metric'
- Change description : The types of the properties Log and Metric will be changed from single object or fixed array to 'List'. 
- This change will take effect on '11/3/2025'- The change is expected to take effect from Az version : '15.0.0'
- The change is expected to take effect from version : '7.0.0'
Note : Go to https://aka.ms/azps-changewarnings for steps to suppress this breaking change warning, and other information on breaking changes in Azure PowerShell.
[2026-01-29 10:49:04] [INFO]     Processing: kv-netrestrict-1820486r
Upcoming breaking changes in the cmdlet 'Get-AzDiagnosticSetting' :
- The output type 'Microsoft.Azure.PowerShell.Cmdlets.Monitor.DiagnosticSetting.Models.Api20210501Preview.IDiagnosticSettingsResource' is changing
- The following properties in the output type are being deprecated : 'Log' 'Metric'
- The following properties are being added to the output type : 'Log' 'Metric'
- Change description : The types of the properties Log and Metric will be changed from single object or fixed array to 'List'. 
- This change will take effect on '11/3/2025'- The change is expected to take effect from Az version : '15.0.0'
- The change is expected to take effect from version : '7.0.0'
Note : Go to https://aka.ms/azps-changewarnings for steps to suppress this breaking change warning, and other information on breaking changes in Azure PowerShell.
[2026-01-29 10:49:05] [INFO]     Processing: kv-weakaccess-1820486r
Upcoming breaking changes in the cmdlet 'Get-AzDiagnosticSetting' :
- The output type 'Microsoft.Azure.PowerShell.Cmdlets.Monitor.DiagnosticSetting.Models.Api20210501Preview.IDiagnosticSettingsResource' is changing
- The following properties in the output type are being deprecated : 'Log' 'Metric'
- The following properties are being added to the output type : 'Log' 'Metric'
- Change description : The types of the properties Log and Metric will be changed from single object or fixed array to 'List'. 
- This change will take effect on '11/3/2025'- The change is expected to take effect from Az version : '15.0.0'
- The change is expected to take effect from version : '7.0.0'
Note : Go to https://aka.ms/azps-changewarnings for steps to suppress this breaking change warning, and other information on breaking changes in Azure PowerShell.
[2026-01-29 10:49:06] [INFO]     Processing: kv-expired-1820486r
Upcoming breaking changes in the cmdlet 'Get-AzDiagnosticSetting' :
- The output type 'Microsoft.Azure.PowerShell.Cmdlets.Monitor.DiagnosticSetting.Models.Api20210501Preview.IDiagnosticSettingsResource' is changing
- The following properties in the output type are being deprecated : 'Log' 'Metric'
- The following properties are being added to the output type : 'Log' 'Metric'
- Change description : The types of the properties Log and Metric will be changed from single object or fixed array to 'List'. 
- This change will take effect on '11/3/2025'- The change is expected to take effect from Az version : '15.0.0'
- The change is expected to take effect from version : '7.0.0'
Note : Go to https://aka.ms/azps-changewarnings for steps to suppress this breaking change warning, and other information on breaking changes in Azure PowerShell.
[2026-01-29 10:49:06] [INFO] Processing subscription 2 of 3: Azure subscription 1
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 28a0fe2d-1db4-4c3e-9a58-142d0f38e709. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 28a0fe2d-1db4-4c3e-9a58-142d0f38e709'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 93298d06-3fff-4626-8e13-397bf9bd4c30. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 93298d06-3fff-4626-8e13-397bf9bd4c30'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 218094f2-2976-4255-a15c-4008e6c8a18b. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 218094f2-2976-4255-a15c-4008e6c8a18b'.'
[2026-01-29 10:49:07] [WARN]   Skipping - subscription in different tenant (MFA required or no access)
[2026-01-29 10:49:07] [INFO] Processing subscription 3 of 3: Pay-As-You-Go
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 28a0fe2d-1db4-4c3e-9a58-142d0f38e709. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 28a0fe2d-1db4-4c3e-9a58-142d0f38e709'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 93298d06-3fff-4626-8e13-397bf9bd4c30. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 93298d06-3fff-4626-8e13-397bf9bd4c30'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 218094f2-2976-4255-a15c-4008e6c8a18b. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 218094f2-2976-4255-a15c-4008e6c8a18b'.'
[2026-01-29 10:49:08] [WARN]   Skipping - subscription in different tenant (MFA required or no access)
[2026-01-29 10:49:08] [INFO] 
[2026-01-29 10:49:08] [INFO] Exporting inventory to: .\Discovery-20260129-104842\KeyVaultInventory.csv
[2026-01-29 10:49:08] [SUCCESS] Export completed successfully!
[2026-01-29 10:49:08] [SUCCESS] Total Key Vaults inventoried: 9
[2026-01-29 10:49:08] [INFO] 
[2026-01-29 10:49:08] [INFO] === Summary Statistics ===
[2026-01-29 10:49:08] [INFO] Total Subscriptions Scanned: 3
[2026-01-29 10:49:08] [INFO] Total Key Vaults Found: 9
[2026-01-29 10:49:08] [INFO] 
[2026-01-29 10:49:08] [INFO] === Compliance Snapshot ===
[2026-01-29 10:49:08] [INFO] Soft Delete Enabled: 9 / 9 (100%)
[2026-01-29 10:49:08] [INFO] Purge Protection Enabled: 8 / 9 (88.89%)
[2026-01-29 10:49:08] [INFO] RBAC Authorization Enabled: 9 / 9 (100%)
[2026-01-29 10:49:08] [INFO] Public Network Access Disabled: 0 / 9 (0%)
[2026-01-29 10:49:08] [INFO] Private Endpoints Configured: 0 / 9 (0%)
[2026-01-29 10:49:08] [INFO] 
[2026-01-29 10:49:08] [SUCCESS] Inventory complete! Review the output file for details.

Press any key to return to menu...
[2026-01-29 10:49:11] [INFO] Phase 3/3: Policy Assignment Inventory
[2026-01-29 10:49:11] [HEADER] Starting Policy Assignment Inventory...
[2026-01-29 10:49:11] [INFO] === Azure Policy Assignment Inventory Script ===
[2026-01-29 10:49:11] [INFO] Sprint 1, Story 1.1 - Environment Discovery & Baseline Assessment
[2026-01-29 10:49:11] [INFO] 
[2026-01-29 10:49:11] [SUCCESS] Connected to Azure as: theregniers@hotmail.com
[2026-01-29 10:49:11] [INFO] Tenant: 21bd262e-3255-411e-8345-51102d9d9e9e
[2026-01-29 10:49:11] [INFO] Retrieving all subscriptions in tenant...
Unable to acquire token for tenant '28a0fe2d-1db4-4c3e-9a58-142d0f38e709' with error 'Authentication failed against tenant 28a0fe2d-1db4-4c3e-9a58-142d0f38e709. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 28a0fe2d-1db4-4c3e-9a58-142d0f38e709'.'
Unable to acquire token for tenant '93298d06-3fff-4626-8e13-397bf9bd4c30' with error 'Authentication failed against tenant 93298d06-3fff-4626-8e13-397bf9bd4c30. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 93298d06-3fff-4626-8e13-397bf9bd4c30'.'
Unable to acquire token for tenant '218094f2-2976-4255-a15c-4008e6c8a18b' with error 'Authentication failed against tenant 218094f2-2976-4255-a15c-4008e6c8a18b. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 218094f2-2976-4255-a15c-4008e6c8a18b'.'
[2026-01-29 10:49:11] [SUCCESS] Found 3 subscription(s)
[2026-01-29 10:49:11] [INFO] Processing subscription 1 of 3: MSDN Platforms Subscription
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 28a0fe2d-1db4-4c3e-9a58-142d0f38e709. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 28a0fe2d-1db4-4c3e-9a58-142d0f38e709'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 93298d06-3fff-4626-8e13-397bf9bd4c30. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 93298d06-3fff-4626-8e13-397bf9bd4c30'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 218094f2-2976-4255-a15c-4008e6c8a18b. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 218094f2-2976-4255-a15c-4008e6c8a18b'.'
[2026-01-29 10:49:13] [SUCCESS]   Found 31 policy assignment(s)
[2026-01-29 10:49:13] [INFO]     Processing: Microsoft Azure region access restriction blocking West Europe region
[2026-01-29 10:49:13] [ERROR]     Error processing assignment sys.blockwesteurope: The property 'assignedBy' cannot be found on this object. Verify that the property exists.
[2026-01-29 10:49:13] [ERROR]   Error processing subscription: The property 'Properties' cannot be found on this object. Verify that the property exists.
[2026-01-29 10:49:13] [INFO] Processing subscription 2 of 3: Azure subscription 1
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 28a0fe2d-1db4-4c3e-9a58-142d0f38e709. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 28a0fe2d-1db4-4c3e-9a58-142d0f38e709'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 93298d06-3fff-4626-8e13-397bf9bd4c30. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 93298d06-3fff-4626-8e13-397bf9bd4c30'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 218094f2-2976-4255-a15c-4008e6c8a18b. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 218094f2-2976-4255-a15c-4008e6c8a18b'.'
[2026-01-29 10:49:14] [WARN]   Skipping - subscription in different tenant (MFA required or no access)
[2026-01-29 10:49:14] [INFO] Processing subscription 3 of 3: Pay-As-You-Go
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 28a0fe2d-1db4-4c3e-9a58-142d0f38e709. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 28a0fe2d-1db4-4c3e-9a58-142d0f38e709'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 93298d06-3fff-4626-8e13-397bf9bd4c30. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 93298d06-3fff-4626-8e13-397bf9bd4c30'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 218094f2-2976-4255-a15c-4008e6c8a18b. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 218094f2-2976-4255-a15c-4008e6c8a18b'.'
[2026-01-29 10:49:15] [WARN]   Skipping - subscription in different tenant (MFA required or no access)
[2026-01-29 10:49:15] [INFO] 
[2026-01-29 10:49:15] [INFO] Exporting inventory to: .\Discovery-20260129-104842\PolicyAssignmentInventory.csv
[2026-01-29 10:49:15] [WARN] No policy assignments found in scanned subscriptions!
[2026-01-29 10:49:15] [INFO] Creating empty CSV file with headers...
[2026-01-29 10:49:15] [INFO] 
[2026-01-29 10:49:15] [SUCCESS] Inventory complete! Review the output file for details.

Press any key to return to menu...
[2026-01-29 10:49:35] [INFO] Generating consolidated report...
[2026-01-29 10:49:35] [SUCCESS] Consolidated report saved: .\Discovery-20260129-104842\DiscoveryReport.txt

===================================================================
Azure Environment Discovery - Consolidated Report
Sprint 1, Story 1.1 - Environment Discovery & Baseline Assessment
===================================================================

Generated: 2026-01-29 10:49:35
Mode: Full (Detailed) Discovery

Output Directory: .\Discovery-20260129-104842

Files Generated:
  ✓ SubscriptionInventory.csv
  ✓ KeyVaultInventory.csv
  ✓ PolicyAssignmentInventory.csv
  ✓ subscriptions-template.csv (compatible format)

===================================================================
Next Steps:
===================================================================

1. Review all CSV files in Excel
2. Update subscriptions-template.csv with Environment tags and Notes
3. Fill out Stakeholder-Contact-Template.csv
4. Update Risk-Register-Template.csv
5. Proceed to Sprint 1, Story 1.2 - Pilot Environment Setup

===================================================================
[2026-01-29 10:49:35] [SUCCESS] Full discovery complete! All files in: .\Discovery-20260129-104842

Press any key to return to menu...
