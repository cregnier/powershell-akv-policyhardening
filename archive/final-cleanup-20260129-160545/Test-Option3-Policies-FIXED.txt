[2026-01-29 11:04:14] [INFO] === Azure Policy Assignment Inventory Script ===
[2026-01-29 11:04:14] [INFO] Sprint 1, Story 1.1 - Environment Discovery & Baseline Assessment
[2026-01-29 11:04:14] [INFO] 
[2026-01-29 11:04:14] [SUCCESS] Connected to Azure as: theregniers@hotmail.com
[2026-01-29 11:04:14] [INFO] Tenant: 21bd262e-3255-411e-8345-51102d9d9e9e
[2026-01-29 11:04:14] [INFO] Retrieving all subscriptions in tenant...
Unable to acquire token for tenant '28a0fe2d-1db4-4c3e-9a58-142d0f38e709' with error 'Authentication failed against tenant 28a0fe2d-1db4-4c3e-9a58-142d0f38e709. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 28a0fe2d-1db4-4c3e-9a58-142d0f38e709'.'
Unable to acquire token for tenant '93298d06-3fff-4626-8e13-397bf9bd4c30' with error 'Authentication failed against tenant 93298d06-3fff-4626-8e13-397bf9bd4c30. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 93298d06-3fff-4626-8e13-397bf9bd4c30'.'
Unable to acquire token for tenant '218094f2-2976-4255-a15c-4008e6c8a18b' with error 'Authentication failed against tenant 218094f2-2976-4255-a15c-4008e6c8a18b. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 218094f2-2976-4255-a15c-4008e6c8a18b'.'
[2026-01-29 11:04:15] [SUCCESS] Found 3 subscription(s)
[2026-01-29 11:04:15] [INFO] Processing subscription 1 of 3: MSDN Platforms Subscription
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 28a0fe2d-1db4-4c3e-9a58-142d0f38e709. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 28a0fe2d-1db4-4c3e-9a58-142d0f38e709'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 93298d06-3fff-4626-8e13-397bf9bd4c30. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 93298d06-3fff-4626-8e13-397bf9bd4c30'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 218094f2-2976-4255-a15c-4008e6c8a18b. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 218094f2-2976-4255-a15c-4008e6c8a18b'.'
[2026-01-29 11:04:16] [SUCCESS]   Found 31 policy assignment(s)
[2026-01-29 11:04:16] [INFO]     Processing: Microsoft Azure region access restriction blocking West Europe region
[2026-01-29 11:04:16] [ERROR]     Error processing assignment sys.blockwesteurope: The property 'ResourceId' cannot be found on this object. Verify that the property exists.
[2026-01-29 11:04:16] [INFO]     Processing: 
[2026-01-29 11:04:17] [ERROR]     Error processing assignment Certificatesshouldhavethespecifiedmaximumvalidityperi-2037153248: The property 'ResourceId' cannot be found on this object. Verify that the property exists.
[2026-01-29 11:04:17] [INFO]     Processing: 
[2026-01-29 11:04:17] [ERROR]     Error processing assignment ConfigureAzureKeyVaultstouseprivateDNSzones-246126126: The property 'ResourceId' cannot be found on this object. Verify that the property exists.
[2026-01-29 11:04:17] [INFO]     Processing: 
[2026-01-29 11:04:17] [ERROR]     Error processing assignment Certificatesshouldhavethespecifiedlifetimeactiontrigg-1747739740: The property 'ResourceId' cannot be found on this object. Verify that the property exists.
[2026-01-29 11:04:17] [INFO]     Processing: 
[2026-01-29 11:04:17] [ERROR]     Error processing assignment PreviewConfigureAzureKeyVaultManagedHSMtodisablepublic-970052128: The property 'ResourceId' cannot be found on this object. Verify that the property exists.
[2026-01-29 11:04:17] [INFO]     Processing: 
[2026-01-29 11:04:17] [ERROR]     Error processing assignment ResourcelogsinKeyVaultshouldbeenabled-1993944844: The property 'ResourceId' cannot be found on this object. Verify that the property exists.
[2026-01-29 11:04:17] [INFO]     Processing: 
[2026-01-29 11:04:17] [ERROR]     Error processing assignment Secretsshouldhavemorethanthespecifiednumberofdaysbefo-1956896279: The property 'ResourceId' cannot be found on this object. Verify that the property exists.
[2026-01-29 11:04:17] [INFO]     Processing: 
[2026-01-29 11:04:17] [ERROR]     Error processing assignment Keysshouldhavethespecifiedmaximumvalidityperiod-917584996: The property 'ResourceId' cannot be found on this object. Verify that the property exists.
[2026-01-29 11:04:17] [INFO]     Processing: 
[2026-01-29 11:04:18] [ERROR]     Error processing assignment DeployDiagnosticSettingsforKeyVaulttoEventHub-1475213071: The property 'ResourceId' cannot be found on this object. Verify that the property exists.
[2026-01-29 11:04:18] [INFO]     Processing: 
[2026-01-29 11:04:18] [ERROR]     Error processing assignment AzureKeyVaultshoulddisablepublicnetworkaccess-1804116204: The property 'ResourceId' cannot be found on this object. Verify that the property exists.
[2026-01-29 11:04:18] [INFO]     Processing: 
[2026-01-29 11:04:18] [ERROR]     Error processing assignment ConfigureAzureKeyVaultswithprivateendpoints-1171436358: The property 'ResourceId' cannot be found on this object. Verify that the property exists.
[2026-01-29 11:04:18] [INFO]     Processing: 
[2026-01-29 11:04:18] [ERROR]     Error processing assignment ResourcelogsinAzureKeyVaultManagedHSMshouldbeenabled-1390998528: The property 'ResourceId' cannot be found on this object. Verify that the property exists.
[2026-01-29 11:04:18] [INFO]     Processing: 
[2026-01-29 11:04:18] [ERROR]     Error processing assignment Keysshouldhavearotationpolicyensuringthattheirrotatio-1707279590: The property 'ResourceId' cannot be found on this object. Verify that the property exists.
[2026-01-29 11:04:18] [INFO]     Processing: 
[2026-01-29 11:04:18] [ERROR]     Error processing assignment Keyvaultsshouldhavesoftdeleteenabled-49446718: The property 'ResourceId' cannot be found on this object. Verify that the property exists.
[2026-01-29 11:04:18] [INFO]     Processing: 
[2026-01-29 11:04:19] [ERROR]     Error processing assignment AzureKeyVaultshouldhavefirewallenabledorpublicnetwork-1524358123: The property 'ResourceId' cannot be found on this object. Verify that the property exists.
[2026-01-29 11:04:19] [INFO]     Processing: 
[2026-01-29 11:04:19] [ERROR]     Error processing assignment Keyvaultsshouldhavedeletionprotectionenabled-1639693146: The property 'ResourceId' cannot be found on this object. Verify that the property exists.
[2026-01-29 11:04:19] [INFO]     Processing: 
[2026-01-29 11:04:19] [ERROR]     Error processing assignment Certificatesshouldbeissuedbythespecifiednonintegrated-2101904348: The property 'ResourceId' cannot be found on this object. Verify that the property exists.
[2026-01-29 11:04:19] [INFO]     Processing: 
[2026-01-29 11:04:19] [ERROR]     Error processing assignment Certificatesshouldnotexpirewithinthespecifiednumberof-1376377526: The property 'ResourceId' cannot be found on this object. Verify that the property exists.
[2026-01-29 11:04:19] [INFO]     Processing: 
[2026-01-29 11:04:19] [ERROR]     Error processing assignment KeyVaultkeysshouldhaveanexpirationdate-2085405476: The property 'ResourceId' cannot be found on this object. Verify that the property exists.
[2026-01-29 11:04:19] [INFO]     Processing: 
[2026-01-29 11:04:19] [ERROR]     Error processing assignment CertificatesusingRSAcryptographyshouldhavethespecifie-1295649684: The property 'ResourceId' cannot be found on this object. Verify that the property exists.
[2026-01-29 11:04:19] [INFO]     Processing: 
[2026-01-29 11:04:19] [ERROR]     Error processing assignment Keysshouldhavemorethanthespecifiednumberofdaysbeforeex-228806126: The property 'ResourceId' cannot be found on this object. Verify that the property exists.
[2026-01-29 11:04:19] [INFO]     Processing: 
[2026-01-29 11:04:19] [ERROR]     Error processing assignment Certificatesshouldbeissuedbyoneofthespecifiednoninteg-1702154610: The property 'ResourceId' cannot be found on this object. Verify that the property exists.
[2026-01-29 11:04:19] [INFO]     Processing: 
[2026-01-29 11:04:20] [ERROR]     Error processing assignment KeyVaultsecretsshouldhaveanexpirationdate-1872490405: The property 'ResourceId' cannot be found on this object. Verify that the property exists.
[2026-01-29 11:04:20] [INFO]     Processing: 
[2026-01-29 11:04:20] [ERROR]     Error processing assignment Configurekeyvaultstoenablefirewall-1695046370: The property 'ResourceId' cannot be found on this object. Verify that the property exists.
[2026-01-29 11:04:20] [INFO]     Processing: 
[2026-01-29 11:04:20] [ERROR]     Error processing assignment Secretsshouldnotbeactiveforlongerthanthespecifiednumb-1744541909: The property 'ResourceId' cannot be found on this object. Verify that the property exists.
[2026-01-29 11:04:20] [INFO]     Processing: 
[2026-01-29 11:04:20] [ERROR]     Error processing assignment Secretsshouldhavethespecifiedmaximumvalidityperiod-1879581546: The property 'ResourceId' cannot be found on this object. Verify that the property exists.
[2026-01-29 11:04:20] [INFO]     Processing: 
[2026-01-29 11:04:20] [ERROR]     Error processing assignment DeployConfigurediagnosticsettingstoanEventHubtobeenab-1026088399: The property 'ResourceId' cannot be found on this object. Verify that the property exists.
[2026-01-29 11:04:20] [INFO]     Processing: 
[2026-01-29 11:04:20] [ERROR]     Error processing assignment KeysusingRSAcryptographyshouldhaveaspecifiedminimumkey-981801388: The property 'ResourceId' cannot be found on this object. Verify that the property exists.
[2026-01-29 11:04:20] [INFO]     Processing: 
[2026-01-29 11:04:20] [ERROR]     Error processing assignment DeployConfigurediagnosticsettingsforAzureKeyVaulttoLo-1278789367: The property 'ResourceId' cannot be found on this object. Verify that the property exists.
[2026-01-29 11:04:20] [INFO]     Processing: 
[2026-01-29 11:04:21] [ERROR]     Error processing assignment PreviewConfigureAzureKeyVaultManagedHSMwithprivateend-1443074618: The property 'ResourceId' cannot be found on this object. Verify that the property exists.
[2026-01-29 11:04:21] [INFO]     Processing: 
[2026-01-29 11:04:21] [ERROR]     Error processing assignment Keysshouldnotbeactiveforlongerthanthespecifiednumberof-804191106: The property 'ResourceId' cannot be found on this object. Verify that the property exists.
[2026-01-29 11:04:21] [INFO] Processing subscription 2 of 3: Azure subscription 1
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 28a0fe2d-1db4-4c3e-9a58-142d0f38e709. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 28a0fe2d-1db4-4c3e-9a58-142d0f38e709'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 93298d06-3fff-4626-8e13-397bf9bd4c30. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 93298d06-3fff-4626-8e13-397bf9bd4c30'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 218094f2-2976-4255-a15c-4008e6c8a18b. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 218094f2-2976-4255-a15c-4008e6c8a18b'.'
[2026-01-29 11:04:22] [WARN]   Skipping - subscription in different tenant (MFA required or no access)
[2026-01-29 11:04:22] [INFO] Processing subscription 3 of 3: Pay-As-You-Go
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 28a0fe2d-1db4-4c3e-9a58-142d0f38e709. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 28a0fe2d-1db4-4c3e-9a58-142d0f38e709'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 93298d06-3fff-4626-8e13-397bf9bd4c30. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 93298d06-3fff-4626-8e13-397bf9bd4c30'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 218094f2-2976-4255-a15c-4008e6c8a18b. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 218094f2-2976-4255-a15c-4008e6c8a18b'.'
[2026-01-29 11:04:23] [WARN]   Skipping - subscription in different tenant (MFA required or no access)
[2026-01-29 11:04:23] [INFO] 
[2026-01-29 11:04:23] [INFO] Exporting inventory to: .\PolicyAssignmentInventory-20260129-110414.csv
[2026-01-29 11:04:23] [SUCCESS] Export completed successfully!
[2026-01-29 11:04:23] [SUCCESS] Total policy assignments inventoried: 31
[2026-01-29 11:04:23] [INFO] 
[2026-01-29 11:04:23] [INFO] === Summary Statistics ===
[2026-01-29 11:04:23] [INFO] Total Subscriptions Scanned: 3
[2026-01-29 11:04:23] [INFO] Total Policy Assignments Found: 31
[2026-01-29 11:04:23] [ERROR] Failed to export inventory: The property 'Count' cannot be found on this object. Verify that the property exists.
