**********************
PowerShell transcript start
Start time: 20260129111636
Username: DTL01\lcladmin
RunAs User: DTL01\lcladmin
Configuration Name: 
Machine: DTL01 (Microsoft Windows NT 10.0.20348.0)
Host Application: C:\Program Files\PowerShell\7\pwsh.dll -noexit -command try { . "c:\Program Files\Microsoft VS Code\resources\app\out\vs\workbench\contrib\terminal\common\scripts\shellIntegration.ps1" } catch {}
Process ID: 8684
PSVersion: 7.5.3
PSEdition: Core
GitCommitId: 7.5.3
OS: Microsoft Windows 10.0.20348
Platform: Win32NT
PSCompatibleVersions: 1.0, 2.0, 3.0, 4.0, 5.0, 5.1, 6.0, 7.0
PSRemotingProtocolVersion: 2.3
SerializationVersion: 1.1.0.1
WSManStackVersion: 3.0
**********************
Transcript started, output file is .\TestResults-MSA-20260129-111529\Test2-KeyVaults-MSA.txt
[2026-01-29 11:16:36]
Running: .\Get-KeyVaultInventory.ps1
[2026-01-29 11:16:36] [INFO] === Azure Key Vault Inventory Script ===
[2026-01-29 11:16:36] [INFO] Sprint 1, Story 1.1 - Environment Discovery & Baseline Assessment
[2026-01-29 11:16:36] [INFO]
[2026-01-29 11:16:36] [SUCCESS] Connected to Azure as: theregniers@hotmail.com
[2026-01-29 11:16:36] [INFO] Tenant: 21bd262e-3255-411e-8345-51102d9d9e9e
[2026-01-29 11:16:36] [INFO] Retrieving all subscriptions in tenant...
WARNING: Unable to acquire token for tenant '28a0fe2d-1db4-4c3e-9a58-142d0f38e709' with error 'Authentication failed against tenant 28a0fe2d-1db4-4c3e-9a58-142d0f38e709. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 28a0fe2d-1db4-4c3e-9a58-142d0f38e709'.'
WARNING: Unable to acquire token for tenant '93298d06-3fff-4626-8e13-397bf9bd4c30' with error 'Authentication failed against tenant 93298d06-3fff-4626-8e13-397bf9bd4c30. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 93298d06-3fff-4626-8e13-397bf9bd4c30'.'
WARNING: Unable to acquire token for tenant '218094f2-2976-4255-a15c-4008e6c8a18b' with error 'Authentication failed against tenant 218094f2-2976-4255-a15c-4008e6c8a18b. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 218094f2-2976-4255-a15c-4008e6c8a18b'.'
[2026-01-29 11:16:37] [SUCCESS] Found 3 subscription(s)
[2026-01-29 11:16:37] [INFO] Processing subscription 1 of 3: MSDN Platforms Subscription
WARNING: Unable to acquire token for tenant '' with error 'Authentication failed against tenant 28a0fe2d-1db4-4c3e-9a58-142d0f38e709. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 28a0fe2d-1db4-4c3e-9a58-142d0f38e709'.'
WARNING: Unable to acquire token for tenant '' with error 'Authentication failed against tenant 93298d06-3fff-4626-8e13-397bf9bd4c30. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 93298d06-3fff-4626-8e13-397bf9bd4c30'.'
WARNING: Unable to acquire token for tenant '' with error 'Authentication failed against tenant 218094f2-2976-4255-a15c-4008e6c8a18b. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 218094f2-2976-4255-a15c-4008e6c8a18b'.'
[2026-01-29 11:16:38] [SUCCESS]   Found 9 Key Vault(s)
[2026-01-29 11:16:38] [INFO]     Processing: TestAKV-SM
WARNING: Upcoming breaking changes in the cmdlet 'Get-AzDiagnosticSetting' :
- The output type 'Microsoft.Azure.PowerShell.Cmdlets.Monitor.DiagnosticSetting.Models.Api20210501Preview.IDiagnosticSettingsResource' is changing
- The following properties in the output type are being deprecated : 'Log' 'Metric'
- The following properties are being added to the output type : 'Log' 'Metric'
- Change description : The types of the properties Log and Metric will be changed from single object or fixed array to 'List'. 
- This change will take effect on '11/3/2025'- The change is expected to take effect from Az version : '15.0.0'
- The change is expected to take effect from version : '7.0.0'
Note : Go to https://aka.ms/azps-changewarnings for steps to suppress this breaking change warning, and other information on breaking changes in Azure PowerShell.
[2026-01-29 11:16:39] [INFO]     Processing: kv-ok-1820486r
WARNING: Upcoming breaking changes in the cmdlet 'Get-AzDiagnosticSetting' :
- The output type 'Microsoft.Azure.PowerShell.Cmdlets.Monitor.DiagnosticSetting.Models.Api20210501Preview.IDiagnosticSettingsResource' is changing
- The following properties in the output type are being deprecated : 'Log' 'Metric'
- The following properties are being added to the output type : 'Log' 'Metric'
- Change description : The types of the properties Log and Metric will be changed from single object or fixed array to 'List'. 
- This change will take effect on '11/3/2025'- The change is expected to take effect from Az version : '15.0.0'
- The change is expected to take effect from version : '7.0.0'
Note : Go to https://aka.ms/azps-changewarnings for steps to suppress this breaking change warning, and other information on breaking changes in Azure PowerShell.
[2026-01-29 11:16:39] [INFO]     Processing: kv-no-purge-1820486r
WARNING: Upcoming breaking changes in the cmdlet 'Get-AzDiagnosticSetting' :
- The output type 'Microsoft.Azure.PowerShell.Cmdlets.Monitor.DiagnosticSetting.Models.Api20210501Preview.IDiagnosticSettingsResource' is changing
- The following properties in the output type are being deprecated : 'Log' 'Metric'
- The following properties are being added to the output type : 'Log' 'Metric'
- Change description : The types of the properties Log and Metric will be changed from single object or fixed array to 'List'. 
- This change will take effect on '11/3/2025'- The change is expected to take effect from Az version : '15.0.0'
- The change is expected to take effect from version : '7.0.0'
Note : Go to https://aka.ms/azps-changewarnings for steps to suppress this breaking change warning, and other information on breaking changes in Azure PowerShell.
[2026-01-29 11:16:40] [INFO]     Processing: kv-no-diag-1820486r
WARNING: Upcoming breaking changes in the cmdlet 'Get-AzDiagnosticSetting' :
- The output type 'Microsoft.Azure.PowerShell.Cmdlets.Monitor.DiagnosticSetting.Models.Api20210501Preview.IDiagnosticSettingsResource' is changing
- The following properties in the output type are being deprecated : 'Log' 'Metric'
- The following properties are being added to the output type : 'Log' 'Metric'
- Change description : The types of the properties Log and Metric will be changed from single object or fixed array to 'List'. 
- This change will take effect on '11/3/2025'- The change is expected to take effect from Az version : '15.0.0'
- The change is expected to take effect from version : '7.0.0'
Note : Go to https://aka.ms/azps-changewarnings for steps to suppress this breaking change warning, and other information on breaking changes in Azure PowerShell.
[2026-01-29 11:16:40] [INFO]     Processing: kv-accesspolicy-1820486r
WARNING: Upcoming breaking changes in the cmdlet 'Get-AzDiagnosticSetting' :
- The output type 'Microsoft.Azure.PowerShell.Cmdlets.Monitor.DiagnosticSetting.Models.Api20210501Preview.IDiagnosticSettingsResource' is changing
- The following properties in the output type are being deprecated : 'Log' 'Metric'
- The following properties are being added to the output type : 'Log' 'Metric'
- Change description : The types of the properties Log and Metric will be changed from single object or fixed array to 'List'. 
- This change will take effect on '11/3/2025'- The change is expected to take effect from Az version : '15.0.0'
- The change is expected to take effect from version : '7.0.0'
Note : Go to https://aka.ms/azps-changewarnings for steps to suppress this breaking change warning, and other information on breaking changes in Azure PowerShell.
[2026-01-29 11:16:41] [INFO]     Processing: kv-rbac-1820486r
WARNING: Upcoming breaking changes in the cmdlet 'Get-AzDiagnosticSetting' :
- The output type 'Microsoft.Azure.PowerShell.Cmdlets.Monitor.DiagnosticSetting.Models.Api20210501Preview.IDiagnosticSettingsResource' is changing
- The following properties in the output type are being deprecated : 'Log' 'Metric'
- The following properties are being added to the output type : 'Log' 'Metric'
- Change description : The types of the properties Log and Metric will be changed from single object or fixed array to 'List'. 
- This change will take effect on '11/3/2025'- The change is expected to take effect from Az version : '15.0.0'
- The change is expected to take effect from version : '7.0.0'
Note : Go to https://aka.ms/azps-changewarnings for steps to suppress this breaking change warning, and other information on breaking changes in Azure PowerShell.
[2026-01-29 11:16:42] [INFO]     Processing: kv-netrestrict-1820486r
WARNING: Upcoming breaking changes in the cmdlet 'Get-AzDiagnosticSetting' :
- The output type 'Microsoft.Azure.PowerShell.Cmdlets.Monitor.DiagnosticSetting.Models.Api20210501Preview.IDiagnosticSettingsResource' is changing
- The following properties in the output type are being deprecated : 'Log' 'Metric'
- The following properties are being added to the output type : 'Log' 'Metric'
- Change description : The types of the properties Log and Metric will be changed from single object or fixed array to 'List'. 
- This change will take effect on '11/3/2025'- The change is expected to take effect from Az version : '15.0.0'
- The change is expected to take effect from version : '7.0.0'
Note : Go to https://aka.ms/azps-changewarnings for steps to suppress this breaking change warning, and other information on breaking changes in Azure PowerShell.
[2026-01-29 11:16:42] [INFO]     Processing: kv-weakaccess-1820486r
WARNING: Upcoming breaking changes in the cmdlet 'Get-AzDiagnosticSetting' :
- The output type 'Microsoft.Azure.PowerShell.Cmdlets.Monitor.DiagnosticSetting.Models.Api20210501Preview.IDiagnosticSettingsResource' is changing
- The following properties in the output type are being deprecated : 'Log' 'Metric'
- The following properties are being added to the output type : 'Log' 'Metric'
- Change description : The types of the properties Log and Metric will be changed from single object or fixed array to 'List'. 
- This change will take effect on '11/3/2025'- The change is expected to take effect from Az version : '15.0.0'
- The change is expected to take effect from version : '7.0.0'
Note : Go to https://aka.ms/azps-changewarnings for steps to suppress this breaking change warning, and other information on breaking changes in Azure PowerShell.
[2026-01-29 11:16:43] [INFO]     Processing: kv-expired-1820486r
WARNING: Upcoming breaking changes in the cmdlet 'Get-AzDiagnosticSetting' :
- The output type 'Microsoft.Azure.PowerShell.Cmdlets.Monitor.DiagnosticSetting.Models.Api20210501Preview.IDiagnosticSettingsResource' is changing
- The following properties in the output type are being deprecated : 'Log' 'Metric'
- The following properties are being added to the output type : 'Log' 'Metric'
- Change description : The types of the properties Log and Metric will be changed from single object or fixed array to 'List'. 
- This change will take effect on '11/3/2025'- The change is expected to take effect from Az version : '15.0.0'
- The change is expected to take effect from version : '7.0.0'
Note : Go to https://aka.ms/azps-changewarnings for steps to suppress this breaking change warning, and other information on breaking changes in Azure PowerShell.
[2026-01-29 11:16:44] [INFO] Processing subscription 2 of 3: Azure subscription 1
WARNING: Unable to acquire token for tenant '' with error 'Authentication failed against tenant 28a0fe2d-1db4-4c3e-9a58-142d0f38e709. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 28a0fe2d-1db4-4c3e-9a58-142d0f38e709'.'
WARNING: Unable to acquire token for tenant '' with error 'Authentication failed against tenant 93298d06-3fff-4626-8e13-397bf9bd4c30. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 93298d06-3fff-4626-8e13-397bf9bd4c30'.'
WARNING: Unable to acquire token for tenant '' with error 'Authentication failed against tenant 218094f2-2976-4255-a15c-4008e6c8a18b. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 218094f2-2976-4255-a15c-4008e6c8a18b'.'
[2026-01-29 11:16:44] [WARN]   Skipping - subscription in different tenant (MFA required or no access)
[2026-01-29 11:16:44] [INFO] Processing subscription 3 of 3: Pay-As-You-Go
WARNING: Unable to acquire token for tenant '' with error 'Authentication failed against tenant 28a0fe2d-1db4-4c3e-9a58-142d0f38e709. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 28a0fe2d-1db4-4c3e-9a58-142d0f38e709'.'
WARNING: Unable to acquire token for tenant '' with error 'Authentication failed against tenant 93298d06-3fff-4626-8e13-397bf9bd4c30. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 93298d06-3fff-4626-8e13-397bf9bd4c30'.'
WARNING: Unable to acquire token for tenant '' with error 'Authentication failed against tenant 218094f2-2976-4255-a15c-4008e6c8a18b. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 218094f2-2976-4255-a15c-4008e6c8a18b'.'
[2026-01-29 11:16:45] [WARN]   Skipping - subscription in different tenant (MFA required or no access)
[2026-01-29 11:16:45] [INFO]
[2026-01-29 11:16:45] [INFO] Exporting inventory to: .\KeyVaultInventory-20260129-111636.csv
[2026-01-29 11:16:45] [SUCCESS] Export completed successfully!
[2026-01-29 11:16:45] [SUCCESS] Total Key Vaults inventoried: 9
[2026-01-29 11:16:45] [INFO]
[2026-01-29 11:16:45] [INFO] === Summary Statistics ===
[2026-01-29 11:16:45] [INFO] Total Subscriptions Scanned: 3
[2026-01-29 11:16:45] [INFO] Total Key Vaults Found: 9
[2026-01-29 11:16:45] [INFO]
[2026-01-29 11:16:45] [INFO] === Compliance Snapshot ===
[2026-01-29 11:16:45] [INFO] Soft Delete Enabled: 9 / 9 (100%)
[2026-01-29 11:16:45] [INFO] Purge Protection Enabled: 8 / 9 (88.89%)
[2026-01-29 11:16:45] [INFO] RBAC Authorization Enabled: 9 / 9 (100%)
[2026-01-29 11:16:45] [INFO] Public Network Access Disabled: 0 / 9 (0%)
[2026-01-29 11:16:45] [INFO] Private Endpoints Configured: 0 / 9 (0%)
[2026-01-29 11:16:45] [INFO]
[2026-01-29 11:16:45] [SUCCESS] Inventory complete! Review the output file for details.
**********************
PowerShell transcript end
End time: 20260129111645
**********************
