[2026-01-29 10:47:51] [INFO] === Azure Key Vault Inventory Script ===
[2026-01-29 10:47:51] [INFO] Sprint 1, Story 1.1 - Environment Discovery & Baseline Assessment
[2026-01-29 10:47:51] [INFO] 
[2026-01-29 10:47:51] [SUCCESS] Connected to Azure as: theregniers@hotmail.com
[2026-01-29 10:47:51] [INFO] Tenant: 21bd262e-3255-411e-8345-51102d9d9e9e
[2026-01-29 10:47:51] [INFO] Retrieving all subscriptions in tenant...
Unable to acquire token for tenant '28a0fe2d-1db4-4c3e-9a58-142d0f38e709' with error 'Authentication failed against tenant 28a0fe2d-1db4-4c3e-9a58-142d0f38e709. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 28a0fe2d-1db4-4c3e-9a58-142d0f38e709'.'
Unable to acquire token for tenant '93298d06-3fff-4626-8e13-397bf9bd4c30' with error 'Authentication failed against tenant 93298d06-3fff-4626-8e13-397bf9bd4c30. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 93298d06-3fff-4626-8e13-397bf9bd4c30'.'
Unable to acquire token for tenant '218094f2-2976-4255-a15c-4008e6c8a18b' with error 'Authentication failed against tenant 218094f2-2976-4255-a15c-4008e6c8a18b. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 218094f2-2976-4255-a15c-4008e6c8a18b'.'
[2026-01-29 10:47:56] [SUCCESS] Found 3 subscription(s)
[2026-01-29 10:47:56] [INFO] Processing subscription 1 of 3: MSDN Platforms Subscription
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 28a0fe2d-1db4-4c3e-9a58-142d0f38e709. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 28a0fe2d-1db4-4c3e-9a58-142d0f38e709'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 93298d06-3fff-4626-8e13-397bf9bd4c30. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 93298d06-3fff-4626-8e13-397bf9bd4c30'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 218094f2-2976-4255-a15c-4008e6c8a18b. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 218094f2-2976-4255-a15c-4008e6c8a18b'.'
[2026-01-29 10:47:57] [SUCCESS]   Found 9 Key Vault(s)
[2026-01-29 10:47:57] [INFO]     Processing: TestAKV-SM
Upcoming breaking changes in the cmdlet 'Get-AzDiagnosticSetting' :
- The output type 'Microsoft.Azure.PowerShell.Cmdlets.Monitor.DiagnosticSetting.Models.Api20210501Preview.IDiagnosticSettingsResource' is changing
- The following properties in the output type are being deprecated : 'Log' 'Metric'
- The following properties are being added to the output type : 'Log' 'Metric'
- Change description : The types of the properties Log and Metric will be changed from single object or fixed array to 'List'. 
- This change will take effect on '11/3/2025'- The change is expected to take effect from Az version : '15.0.0'
- The change is expected to take effect from version : '7.0.0'
Note : Go to https://aka.ms/azps-changewarnings for steps to suppress this breaking change warning, and other information on breaking changes in Azure PowerShell.
[2026-01-29 10:47:58] [INFO]     Processing: kv-ok-1820486r
Upcoming breaking changes in the cmdlet 'Get-AzDiagnosticSetting' :
- The output type 'Microsoft.Azure.PowerShell.Cmdlets.Monitor.DiagnosticSetting.Models.Api20210501Preview.IDiagnosticSettingsResource' is changing
- The following properties in the output type are being deprecated : 'Log' 'Metric'
- The following properties are being added to the output type : 'Log' 'Metric'
- Change description : The types of the properties Log and Metric will be changed from single object or fixed array to 'List'. 
- This change will take effect on '11/3/2025'- The change is expected to take effect from Az version : '15.0.0'
- The change is expected to take effect from version : '7.0.0'
Note : Go to https://aka.ms/azps-changewarnings for steps to suppress this breaking change warning, and other information on breaking changes in Azure PowerShell.
[2026-01-29 10:47:59] [INFO]     Processing: kv-no-purge-1820486r
Upcoming breaking changes in the cmdlet 'Get-AzDiagnosticSetting' :
- The output type 'Microsoft.Azure.PowerShell.Cmdlets.Monitor.DiagnosticSetting.Models.Api20210501Preview.IDiagnosticSettingsResource' is changing
- The following properties in the output type are being deprecated : 'Log' 'Metric'
- The following properties are being added to the output type : 'Log' 'Metric'
- Change description : The types of the properties Log and Metric will be changed from single object or fixed array to 'List'. 
- This change will take effect on '11/3/2025'- The change is expected to take effect from Az version : '15.0.0'
- The change is expected to take effect from version : '7.0.0'
Note : Go to https://aka.ms/azps-changewarnings for steps to suppress this breaking change warning, and other information on breaking changes in Azure PowerShell.
[2026-01-29 10:47:59] [INFO]     Processing: kv-no-diag-1820486r
Upcoming breaking changes in the cmdlet 'Get-AzDiagnosticSetting' :
- The output type 'Microsoft.Azure.PowerShell.Cmdlets.Monitor.DiagnosticSetting.Models.Api20210501Preview.IDiagnosticSettingsResource' is changing
- The following properties in the output type are being deprecated : 'Log' 'Metric'
- The following properties are being added to the output type : 'Log' 'Metric'
- Change description : The types of the properties Log and Metric will be changed from single object or fixed array to 'List'. 
- This change will take effect on '11/3/2025'- The change is expected to take effect from Az version : '15.0.0'
- The change is expected to take effect from version : '7.0.0'
Note : Go to https://aka.ms/azps-changewarnings for steps to suppress this breaking change warning, and other information on breaking changes in Azure PowerShell.
[2026-01-29 10:48:00] [INFO]     Processing: kv-accesspolicy-1820486r
Upcoming breaking changes in the cmdlet 'Get-AzDiagnosticSetting' :
- The output type 'Microsoft.Azure.PowerShell.Cmdlets.Monitor.DiagnosticSetting.Models.Api20210501Preview.IDiagnosticSettingsResource' is changing
- The following properties in the output type are being deprecated : 'Log' 'Metric'
- The following properties are being added to the output type : 'Log' 'Metric'
- Change description : The types of the properties Log and Metric will be changed from single object or fixed array to 'List'. 
- This change will take effect on '11/3/2025'- The change is expected to take effect from Az version : '15.0.0'
- The change is expected to take effect from version : '7.0.0'
Note : Go to https://aka.ms/azps-changewarnings for steps to suppress this breaking change warning, and other information on breaking changes in Azure PowerShell.
[2026-01-29 10:48:00] [INFO]     Processing: kv-rbac-1820486r
Upcoming breaking changes in the cmdlet 'Get-AzDiagnosticSetting' :
- The output type 'Microsoft.Azure.PowerShell.Cmdlets.Monitor.DiagnosticSetting.Models.Api20210501Preview.IDiagnosticSettingsResource' is changing
- The following properties in the output type are being deprecated : 'Log' 'Metric'
- The following properties are being added to the output type : 'Log' 'Metric'
- Change description : The types of the properties Log and Metric will be changed from single object or fixed array to 'List'. 
- This change will take effect on '11/3/2025'- The change is expected to take effect from Az version : '15.0.0'
- The change is expected to take effect from version : '7.0.0'
Note : Go to https://aka.ms/azps-changewarnings for steps to suppress this breaking change warning, and other information on breaking changes in Azure PowerShell.
[2026-01-29 10:48:01] [INFO]     Processing: kv-netrestrict-1820486r
Upcoming breaking changes in the cmdlet 'Get-AzDiagnosticSetting' :
- The output type 'Microsoft.Azure.PowerShell.Cmdlets.Monitor.DiagnosticSetting.Models.Api20210501Preview.IDiagnosticSettingsResource' is changing
- The following properties in the output type are being deprecated : 'Log' 'Metric'
- The following properties are being added to the output type : 'Log' 'Metric'
- Change description : The types of the properties Log and Metric will be changed from single object or fixed array to 'List'. 
- This change will take effect on '11/3/2025'- The change is expected to take effect from Az version : '15.0.0'
- The change is expected to take effect from version : '7.0.0'
Note : Go to https://aka.ms/azps-changewarnings for steps to suppress this breaking change warning, and other information on breaking changes in Azure PowerShell.
[2026-01-29 10:48:02] [INFO]     Processing: kv-weakaccess-1820486r
Upcoming breaking changes in the cmdlet 'Get-AzDiagnosticSetting' :
- The output type 'Microsoft.Azure.PowerShell.Cmdlets.Monitor.DiagnosticSetting.Models.Api20210501Preview.IDiagnosticSettingsResource' is changing
- The following properties in the output type are being deprecated : 'Log' 'Metric'
- The following properties are being added to the output type : 'Log' 'Metric'
- Change description : The types of the properties Log and Metric will be changed from single object or fixed array to 'List'. 
- This change will take effect on '11/3/2025'- The change is expected to take effect from Az version : '15.0.0'
- The change is expected to take effect from version : '7.0.0'
Note : Go to https://aka.ms/azps-changewarnings for steps to suppress this breaking change warning, and other information on breaking changes in Azure PowerShell.
[2026-01-29 10:48:02] [INFO]     Processing: kv-expired-1820486r
Upcoming breaking changes in the cmdlet 'Get-AzDiagnosticSetting' :
- The output type 'Microsoft.Azure.PowerShell.Cmdlets.Monitor.DiagnosticSetting.Models.Api20210501Preview.IDiagnosticSettingsResource' is changing
- The following properties in the output type are being deprecated : 'Log' 'Metric'
- The following properties are being added to the output type : 'Log' 'Metric'
- Change description : The types of the properties Log and Metric will be changed from single object or fixed array to 'List'. 
- This change will take effect on '11/3/2025'- The change is expected to take effect from Az version : '15.0.0'
- The change is expected to take effect from version : '7.0.0'
Note : Go to https://aka.ms/azps-changewarnings for steps to suppress this breaking change warning, and other information on breaking changes in Azure PowerShell.
[2026-01-29 10:48:03] [INFO] Processing subscription 2 of 3: Azure subscription 1
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 28a0fe2d-1db4-4c3e-9a58-142d0f38e709. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 28a0fe2d-1db4-4c3e-9a58-142d0f38e709'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 93298d06-3fff-4626-8e13-397bf9bd4c30. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 93298d06-3fff-4626-8e13-397bf9bd4c30'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 218094f2-2976-4255-a15c-4008e6c8a18b. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 218094f2-2976-4255-a15c-4008e6c8a18b'.'
[2026-01-29 10:48:04] [WARN]   Skipping - subscription in different tenant (MFA required or no access)
[2026-01-29 10:48:04] [INFO] Processing subscription 3 of 3: Pay-As-You-Go
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 28a0fe2d-1db4-4c3e-9a58-142d0f38e709. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 28a0fe2d-1db4-4c3e-9a58-142d0f38e709'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 93298d06-3fff-4626-8e13-397bf9bd4c30. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 93298d06-3fff-4626-8e13-397bf9bd4c30'.'
Unable to acquire token for tenant '' with error 'Authentication failed against tenant 218094f2-2976-4255-a15c-4008e6c8a18b. User interaction is required. This may be due to the conditional access policy settings such as multi-factor authentication (MFA). If you need to access subscriptions in that tenant, please rerun 'Connect-AzAccount' with additional parameter '-TenantId 218094f2-2976-4255-a15c-4008e6c8a18b'.'
[2026-01-29 10:48:05] [WARN]   Skipping - subscription in different tenant (MFA required or no access)
[2026-01-29 10:48:05] [INFO] 
[2026-01-29 10:48:05] [INFO] Exporting inventory to: .\KeyVaultInventory-20260129-104751.csv
[2026-01-29 10:48:05] [SUCCESS] Export completed successfully!
[2026-01-29 10:48:05] [SUCCESS] Total Key Vaults inventoried: 9
[2026-01-29 10:48:05] [INFO] 
[2026-01-29 10:48:05] [INFO] === Summary Statistics ===
[2026-01-29 10:48:05] [INFO] Total Subscriptions Scanned: 3
[2026-01-29 10:48:05] [INFO] Total Key Vaults Found: 9
[2026-01-29 10:48:05] [INFO] 
[2026-01-29 10:48:05] [INFO] === Compliance Snapshot ===
[2026-01-29 10:48:05] [INFO] Soft Delete Enabled: 9 / 9 (100%)
[2026-01-29 10:48:05] [INFO] Purge Protection Enabled: 8 / 9 (88.89%)
[2026-01-29 10:48:05] [INFO] RBAC Authorization Enabled: 9 / 9 (100%)
[2026-01-29 10:48:05] [INFO] Public Network Access Disabled: 0 / 9 (0%)
[2026-01-29 10:48:05] [INFO] Private Endpoints Configured: 0 / 9 (0%)
[2026-01-29 10:48:05] [INFO] 
[2026-01-29 10:48:05] [SUCCESS] Inventory complete! Review the output file for details.
